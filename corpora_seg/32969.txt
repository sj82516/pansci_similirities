文 ／ 馬 萬圳 前言 躺 床上 看書 看累 想 倒頭 睡 卻 懶得 下 床 關燈 窩 舒服 沙發 看電視 想開 電風扇 涼快 一下 卻連 抬個 腿 覺得 麻煩 這時候 遙控器 遙控 電器 關開 一下 電燈 關掉 一下 電風扇 打開 該是 多麼 美好 一件 事 這聽 困難 一點 本專題 告訴您 使用 紅外線 遙控 插座 控制 電器 開關   Arduino   製 一個 簡單 紅外線 遙控器 利用   Arduino   遙控 紅外線 插座 STEP   紅外線 插座 插到 110V 插座   圖 先 一下 黑色 按鈕 燈亮 再 按住 按鈕 約 秒鐘 燈 亮後手 放開 此時 燈會 閃爍   圖 代表 紅外線 插座 已 進入 紅外線 學習 模式   圖 紅外線 插座 插入 110V 插座   圖 按住 按鍵 秒鐘 後 放開 此時 燈會 閃爍 表示 已 進入 紅外線 學習 模式 家裏 一個 遙控器 對著 紅外線 插座 任一 鍵   圖 紅外線 插座 聰明 當你 聽到 繼電器 發出 嗒 一聲 時 表示 已經 紅外線 學   圖 遙控器 對著 紅外線 插座 任一 鍵 完成 設定 後 馬 做個 簡單 測試 電器   電風扇 立燈   插 紅外線 插座 一下 遙控器 一顆 按鍵 此時 電器 電源 打開   圖 再 一下 便會 關閉電源   圖   圖 一下 打開 電器 此時 燈會 亮   圖 再 一下 關閉 電器 此時 燈會 熄滅 STEP   下 一步 使用   Arduino   讀取 遙控器 紅外線 訊號 連接 電路   38kHz   紅外線 接收器 接到   Arduino   紅外線 接收器 接法 如圖 所示 接收器 Vout 腳 接到 pin   腳位 Vcc 接到 5V 輸出 腳位 GND 接到   Arduino GND 腳位   圖 紅外線 接收器 線路 接法 安裝   IRRemote   Library 請將 IRRemote   Library 下載 後 註 解壓縮 放到 libraries 資料夾 底下 即可   C arduino 1.0 libraries 底下 程式 輸入 Arduino   IDE   上傳   Arduino   板子   示 紅外線 協定 訊號 include     引用   IRRemote   函式 庫 const   int   irReceiverPin         紅外線 接收器   OUTPUT   訊號 接   pin   IRrecv   irrecv irReceiverPin     定義   IRrecv   物件 接收 紅外線 訊號 decode results   results     解碼 放在   decode results   結構   result   變數 裏 void   setup { Serial begin 9600     開啟   Serial   port   通訊 速率   9600   bps irrecv enableIRIn     啟動 紅外線 解碼 }   顯示 紅外線 協定 種類 void   showIRProtocol decode results   results { Serial print Protocol     判斷 紅外線 協定 種類 switch results decode type   { case   NEC Serial print NEC break case   SONY Serial print SONY break case   RC5 Serial print RC5 ″ break case   RC6 Serial print RC6 ″ break default Serial print Unknown   encoding }   紅外線 編碼 印   Serial   port Serial print   irCode   Serial print results value   HEX     紅外線 編碼 Serial print   bits   Serial println results bits     紅外線 編碼 位元數 } void   loop { if   irrecv decode results   {     解碼 成功 收到 一組 紅外線 訊號 showIRProtocol results     顯示 紅外線 協定 種類 irrecv resume     繼續 收下 一組 紅外線 訊號 } } 程式 上傳完畢 後 打開   Serial   Monitor 遙控器 對著 紅外線 接收器 按下 按鍵 要用 紅外線 插座 同一個 按鍵 這時候 Serial   Monitor 顯示 紅外線 訊號 編碼 如圖 所示   圖 遙控器 紅外線 訊號 將解 Protocol 種類 編碼 記錄下來 本例   NEC 協定 編碼 4CB3817E 用到 STEP   下 一步 使用   Arduino   發射 紅外線 遙控 紅外線 插座 先 連接 電路 紅外線 發射器 一顆 按鈕 接到 Arduino 紅外線 發射器 接法 如圖 所示 發射器 長腳 接到   pin     腳位 串接 一顆   100   ohm   電阻 短腳 接到   GND 腳位 按鈕 則是 一支 腳 接到   5V 輸出 腳位 一支 腳 接到   pin     腳位 接 一個   10K   電阻 連接   GND 腳位 底下 程式 輸入 Arduino   IDE   上傳   Arduino   板子   發射 紅外線 訊號   注意   紅外線 發射器 IR   LED 接到   pin     接 腳位 include   引用   IRRemote   函式 庫 const   int   buttonPin         按鍵 pushbutton 接   pin   int   buttonState         按鍵 狀態 IRsend   irsend     定義   IRsend   物件 發射 紅外線 訊號 void   setup { pinMode buttonPin   INPUT       buttonPin   設置成   INPUT } void   loop {   讀取 按鍵 狀態 buttonState     digitalRead buttonPin   檢查 按鍵 是否 下 pressed     buttonState     HIGH if   buttonState     HIGH   {   發射 紅外線 訊號 irsend sendNEC 0x4CB3817E   32     記得 換成 遙控器 紅外線 編碼 } } 本例 所用 是講 NEC 協定 遙控器 程式 呼叫 sendNEC   發射 紅外線 訊號   STEP2 解到 紅外線 協定 改 呼叫 函式 sendSony   sendRC5   sendRC6   sendSharp 記得 程式 裏 紅外線 編碼 換成 遙控器 編碼 大功告成 此時 按下 按鈕 後 Arduino 遙控 紅外線 遙控 插座 打開 關閉 電器 電源 囉 Ethernet   Shield Wi Fi   Shield   藍芽 擴充 模組 利用   Arduino   紅外線 遙控 插座 再 寫個 手機 App 利用 手機 遙控 家電 開關 這部 份 想 留給 當作 功課 註   IRRemote   Library   由此 連結 下載 材料 表   一張   Arduino   板子 一條   USB   傳輸線   Arduino   IDE   軟體 開發 環境   一顆   38   kHz   紅外線 接收器   Infrared   Receiver   TSOP2438   TSOP4438   PNA4602   FM 8038TM2 5DN ▲   紅外線 接收器 Infrared   Receiver   一顆 發射 波長   940nm   nanometer   奈米   紅外線 發射器   一個 紅外線 遙控 插座   露天 淘寶 買 馬 萬圳 先生 Cooper   Maa 國內 資深 Arduino 玩家 部落 格 文章 原文 刊載 MAKE 國際 中文版 2017   年泛 知識 節   早腦 人必 搶 早 鳥 優惠 開 跑啦 「   領域   x   150   場 分享 體驗 工作坊   x   200   意見 領袖   x   1000   參與者 」 2017   年 兩岸三地 最大 知識 饗宴   –   泛 ・ 知識 節   早鳥票 開賣 由泛 科 知識 旗下   PanSci   科學 新聞網   娛樂 重擊   Punchline PanX   泛 科技 新聞網 聯合 超強 協力 夥伴 邀 兩天 火拼 知識 大腦 做個 版本升級 11 月   11 12   日到 泛 ． 知識 節 直搗 知識 核心 挑戰 創造 未知   ∞   種 手腳 迅速 眼光 精準 早腦 人 還不 速速 搶下 早鳥 優惠 獨家 周邊 商品 購票 還贈   TAAZE   讀冊 生活 折價 卷 早鳥 優惠 只到   10 27 馥林 文化 泰電 電業 股份 有限公司 2002 年 成立 出版部門 鑒 21 世紀 將是 數位 科技 人文 融合 互動 世代 馥林 亦 出版 科技 機械 類雜誌 相關 書籍 馥林 文化 出版 書籍 http www fullon com tw 