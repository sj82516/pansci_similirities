文 ／ 曾吉弘 CAVE 教育 團隊 暑假 玩 機器人 本期 CAVE App   Inventor 機器人 專欄 要教 利用 Android 手機 觸碰 面板 控制 樂高 機器人 控制 超 順暢 亮出 手機 手指 本次 範例 透過 atan 反正 函數 將觸 控點 座標 推算 回 X 軸 夾角 之後 再 分別 使用 sin cos 函數 轉換 左右 馬達 電力 清楚 體驗 手指 位置 機器人 動作 影響 請 NXT   機器人 準備 好   圖 並將 左側 馬達 接在 NXT   輸出 端 B   右側 則是 輸出 端 C 註 請 確認 NXT   主機 藍牙 啟動 接著將 NXT   主機 Android   手機 進行 藍牙 配對 註 完成 之後 機器人 放到 一邊 啟動 藍牙 之後 NXT   主機 螢幕 左上角 看到 藍牙 符號 圖   樂高 NXT   機器人 組裝 範例 依序 介紹 程式 功能 STEP1 首次 進入 程式 畫面 如圖 2a     看到   「 NXT   裝置 清單   連線 」 按鈕 「 斷線 」 按鈕 無法 按下 點選 「 連線 」 按鈕 後 進入 藍牙 裝置 清單 圖 連線 成功 看到 黃色 觸控 面板 出現 圖   程式 首次 執行 畫面 → 點選 連線 按鈕 後 進入 藍牙 裝置 清單 → 連線 成功 後 出現 觸控 面板 STEP2 是將 ListPickerConnect   清單 指定 藍牙 配對 裝置 清單   圖   點選 「 連線 」 按鈕 之後   進入 Android   裝置 藍牙 連線 清單 圖 請 找到 剛剛 配對 完成 NXT   主機 名稱 範例 abc 點選 之後 Android   裝置 NXT   主機 發起 藍牙 連線 圖   ListPickerConnect   清單 內容 指定 藍牙 配對 裝置 清單 STEP3 本次 程式 關鍵在於 Animation   ImageSprite   動畫 精靈 元件 手指頭 拖拉 移動 手機 Orientation   sensor   傾斜 狀況 移動 自行 設定 速度 speed 指向 heading 欄位 完成 一個打 磚塊 遊戲 註 手指頭 拉動 Imagesprite 元件 效果   需 放在 Canvas   畫布 元件 中   Canvas Dragged 事件 回傳 座標 移動 位置 ImageSprite   自由 上傳 圖檔 做 背景圖片   上傳 太大 圖   畫面 占滿 不好玩 請 ImageSprite   Picture   欄位 點選 「 Add ⋯ 」 按鈕 上傳 圖片 即可 圖 圖   上傳 ImageSprite   背景 圖檔 STEP4 程式 主要 執行 區 在於 Canvas Dragged   拖拉 事件 分段 說明     使用 Ima   g   eSp   r   i   t   e   Mo   v   e   To   指令 XY 欄位 指定 CurrentX CurrentY 手指 拉著 可愛 CAVE 小圖 走   標籤 Label 顯示 XY 座標 Canvas   原點 位於 左上角 需要 平移 160 像素 原點 移 畫布 中心 除以 1.6 轉換成 百分比 以利 後續 馬達 電力 換算   兩個 重要 變數 X Y •   變數 X 為觸 碰點 X 軸的 夾角 θ   公式 atan y x   –   45 atan 反正 函數   y x 反 推出 夾角 θ   •   變數 Y 為觸 碰點 螢幕 中心 距離 公式 √ x     y 距離 愈遠 跑 愈 樂高 NXT 機器人 馬達 電力 範圍 100 正向 全速 旋轉 100 反向 全速 旋轉 數值 超過 下限 則就 限制 100 100 最後 B 馬達 電力 指定 sin x y C 馬達 電力 指定 cos x y 大功告成 擦擦 汗 圖   Canvas Dragged   拖拉 事件 程式 主 執行 區 STEP5 按下 「 停止 」 按鈕 之後 執行 三件 事   使 ImageSprite   歸位   停下 機器人   畫面 數值 歸零 ImageSprite   圖案 尺寸 30 × 30 像素   需將 Canvas   畫布 尺寸 160   再 減掉 15   得出 145   使 ImageSprite   回到 畫面 正中間 STEP6 按下 「 斷線 」 按鈕 之後 中止 藍牙 連線 BluetoothClient Disconnect 指令 並使 按鈕 恢復 未 連線 時 狀態 黃色 觸控 面板 看不到 這時候 再次 發起 連線 圖   按下 停止 按鈕 停下 機器人 並使 ImageSprite 歸位 圖   按下 「 斷線 」 按鈕 時 中斷 藍牙 連線 STEP7 實際 執行   請 先 確認 NXT 已經 開機 藍牙 啟動 Android   裝置 點選 程式 畫面 中 「 連線 」 按鈕 進到 如圖 2a   藍牙 清單 畫面 點選 NXT   主機 名稱 連線 成功 後 出現 觸控 面板 亮出 手指頭 控制 機器人 畫面 中心 Y   軸 拉動 手指 機器人 前進 後退 左右 拉動 X   軸 則是 原地 左 右轉 停止 按鈕 兩個 數字 看到 ImageSprite   XY   座標 圖   手指 左上方 拖動 時 機器人 左前方 前進 ／ 手指 右下方 拖動 時 機器人 右後方 後退 團隊 教學 經驗 範例 結合 三角函數 絕佳 範例 筆者 高中 時期 三角函數 生硬 公式 背背 sin2 θ   sin θ   之間 關係式 無法 實際 應用 機器人 領域 中 三角函數 相當 重要 技巧 機器人 用來 定位 推算 方位角 相信 練習 過本 範例 之後 三角函數 應用 角度 數值 之間 關係 清楚 唷 圖   座標 示意圖 程式 直接 Google   Play   下載 請 GooglePlay   搜尋 「 CAVE   教育 團隊 」 找 得到 掃描 以下 QRCode   唷 註   機器人 運動 方向 車頭 指向 程式 設定 相反 左右 馬達 電線 互換 即可 註 Android   手機 設定 安裝 非 Market   下載 程式 手機 樂高 NXT   主機 連線 說明 請 參考 http www appinventor tw 註 磚塊 遊戲 請 http www appinventor tw   下載 文章 原文 刊載 ROBOCON 國際 中文版 2012 月號 2017   年泛 知識 節   早腦 人必 搶 早 鳥 優惠 開 跑啦 「   領域   x   150   場 分享 體驗 工作坊   x   200   意見 領袖   x   1000   參與者 」 2017   年 兩岸三地 最大 知識 饗宴   –   泛 ・ 知識 節   早鳥票 開賣 由泛 科 知識 旗下   PanSci   科學 新聞網   娛樂 重擊   Punchline PanX   泛 科技 新聞網 聯合 超強 協力 夥伴 邀 兩天 火拼 知識 大腦 做個 版本升級 11 月   11 12   日到 泛 ． 知識 節 直搗 知識 核心 挑戰 創造 未知   ∞   種 手腳 迅速 眼光 精準 早腦 人 還不 速速 搶下 早鳥 優惠 獨家 周邊 商品 購票 還贈   TAAZE   讀冊 生活 折價 卷 早鳥 優惠 只到   10 27 