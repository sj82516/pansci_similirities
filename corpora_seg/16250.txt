探索 小 怪獸 文 ／ 鮑惟聖 加裝 LED 紅外線 感測器 現在 「 小 怪獸 」 已經 靈活 動作 一段 有趣 舞蹈 不難 事 前面 提到 想替 「 小 怪獸 」 裝 二個 LED 紅外線 感測器 圖 更酷 聰明 現在 繼續 努力 圖 介紹 元件 工作 原理 對照 之前 SC8 接線 安裝 圖 LED 二隻 腳 長腳 正極 短腳 負極 長腳 串接 一個 220 歐姆   電阻 5V 電阻 色碼 紅紅 棕 LED 短腳 再 分別 接到 數位 輸入輸出 腳 P0 P6 P0 P6 選擇 方便 LED 安裝 左右 兩邊 考量 再   安裝 紅外線 發射器 使用 一個 紅外線 LED 顧名思義 一個 LED 只不過 發射 紅外線 LED 描述 適   接到 P2 紅外線 接收器 一個 三隻 腳 元件 使用 編號 FM 9038LM 5AN 分別 正 負 電源 輸出 腳 正 負 電源   分別 接到 5V GND 輸出 腳則 接到 P4 腳 紅外線 LED 紅外線 接收器 同樣 面向 前方 紅外線 LED 側面 散 紅外線 接收器 收到 造成 誤認   前方 障礙物 避免 紅外線 散 這裏 使用 膠 套將 紅外線 LED 包 允許 從前 發射 紅外線 手邊 適用 膠套 使用 黑色 電工 膠帶   LED 纏繞 僅留 前方 開口 即可 目前 使用 P0 P2 P6 做 輸出 使用 p4 做 輸入 使用 圖 方便 辨識 特別 將須 接到 5V 線路 選用   紅色 線材 須 接到 GND 線路 選用 黑色 線材 須 接到 I O 接腳 線路 選用 黃色 線材 實際 接線 時要 注意 避免 金屬 部分 碰觸 造成 短路 電工 膠帶 塑膠套   需要 線路 相同 一個 人 實際 接線 太 美醜 每個 人 藝術細胞 我給 隻 腳套 紅色 熱縮 套管 再 加熱 使 收縮 掉落 穿 四隻 小 紅鞋 還很有 造型 防滑 功效 希望 藝術細胞 有加 分 作用 完成 品請 圖 B 圖 B 「 小 怪獸 探索 」 程式 現在 感測器 輸入 動作 結合 前面 程式 練習題 現在 正式 撰寫 「 小 怪獸 探索 」 程式 先 介紹 一下 「 小 怪獸 」 行為 模式 開啟 電源 後 「 小 怪獸 」 會先 點亮 LED 雙眼 維持 標準 站姿 五秒 做 兩個 「 伏地挺身 」 暖身 一下 準備 出發 「 小   怪獸 」 隨時 測量 前方 是否 障礙物 LED 雙眼 保持 每秒 明滅 一次 速度 眨眼 發現 障礙物 停止 前進 原地 左轉 再次 測量 前方 是否 障礙物 這段   期間 LED 雙眼 兩倍 速度 明滅 焦慮 樣子 前方 依舊 測量 障礙物 持續 作 左轉 測量 動作 直到 障礙物 消失 繼續前進 LED   雙眼 恢復 每秒 明滅 一次 眨眼 速度 障礙物 偵測 距離 30 公分 調整 偵測 距離 方法 以後 機會 再來 介紹 以下 程式 原始 碼 後面 註解 說明 程式 只 使用 幾個 副 程序 提高 程式 閱讀 性 方便 入門者 了解 程式 控制 原理 熟悉 相關 程式 技巧 後 嘗試 結構化 程式 架構 減少 程式 行數 提高 執行 效率 增加 程式 維護 修改 彈性   小 怪獸 探索 程式 Peripheral   mySer   As   ServoRunner8A         預設 建模 組 ID Sub   OpenEyes Low       點亮 左眼 LED Low       點亮 右眼 LED End   Sub Sub   CloseEyes High       熄滅 左眼 LED High       熄滅 右眼 LED End   Sub Sub   RunFrame ID   As   Byte Myser LoadFrame ID     載入 編號 ID 動作 Myser Runallservo     執行 載入 動作 Pause   150     等待 伺服 機 完成 動作 每秒 步 End   Sub Sub   Main Dim   IR   As   Byte     宣告 變數   點亮 左右眼 LED 初始 立正 姿勢 OpenEyes     點亮 雙眼 LED RunFrame     呼叫 程序執行 編號 動作 Pause   5000     等待 秒 動作   伏地挺身 二次 RunFrame     呼叫 程序執行 編號 動作 RunFrame     呼叫 程序執行 編號 動作 RunFrame     呼叫 程序執行 編號 動作 RunFrame     呼叫 程序執行 編號 動作 Pause   2000     等待 秒 出發   程式 主 循環 Do Sound     38400     腳 發射 微秒 38.4 kHz 紅外線 載波 IR     In     腳 讀取 紅外線 載波 資料 If   IR       Then     發現 障礙物 向左轉 左前 足 起步 左轉   [ ] RunFrame     呼叫 程序執行 編號 動作 CloseEyes RunFrame     呼叫 程序執行 編號 動作 OpenEyes RunFrame     呼叫 程序執行 編號 動作 CloseEyes RunFrame     呼叫 程序執行 編號 動作 OpenEyes Else     未 發現 障礙物 右前 足 起步 前行   [ ] RunFrame     呼叫 程序執行 編號 動作 RunFrame     呼叫 程序執行 編號 動作 CloseEyes RunFrame     呼叫 程序執行 編號 動作 RunFrame     呼叫 程序執行 編號 動作 OpenEyes End   If Loop End   Sub 程式 輸入 完畢 之後 請 「 建立 」 選單 中 選取 「 建立 」 功能 進行 程式 編譯 USB 線 下載 編譯 後 程式碼 SC8 控制板 此時 「 小 怪獸 」 做 「 伏地   挺身 」 程式 流程 已經 「 小 怪獸 」 具有 迷宮 脫困 能力 完成 程式 之後 嘗試 定義 一下 複雜 流程 原則上 複雜 流程 「 小   怪獸 」 聰明 方法 迷宮 中 脫困 感測器 「 小 怪獸 」 快速 地感測 周邊環境 做出 有效率 決策 這時候 辦個 「 走 迷宮 競   賽 」 「 小 怪獸 」 厲害 高下 立判 文章 接近 尾聲 當我 功能 驗證 完畢 之後 心情 剎時 輕鬆 幾個 紙盒 當成 路障 書房 燈 給轉   暗 再 啟動 「 小 怪獸 」 閃爍 LED 光影 「 」 伺服 機 轉動 聲 踽踽獨行 身影 彷彿 看到 「 小 怪獸 」 火星 探索 We   are   programmed   to   explore   機器人 DIY 樂趣 當我 神遊 異想 世界 裡 「 小 怪獸 」 已經 紙盒 做 「 八卦陣 」 裡走 彷彿 聽到 「 小 怪獸 」 說 What s   next 鮑惟聖 擁有 中原大學 電機工程 學士學位 利基 應用 科技 www innovati com tw 創辦人 年來 一直 從事 微處理器 應用 系統 工具 開發 致力於 推廣 智慧型 機器人 科普 教育 本文 原 發表 Make 國際 中文版 vol 03 2017   年泛 知識 節   早腦 人必 搶 早 鳥 優惠 開 跑啦 「   領域   x   150   場 分享 體驗 工作坊   x   200   意見 領袖   x   1000   參與者 」 2017   年 兩岸三地 最大 知識 饗宴   –   泛 ・ 知識 節   早鳥票 開賣 由泛 科 知識 旗下   PanSci   科學 新聞網   娛樂 重擊   Punchline PanX   泛 科技 新聞網 聯合 超強 協力 夥伴 邀 兩天 火拼 知識 大腦 做個 版本升級 11 月   11 12   日到 泛 ． 知識 節 直搗 知識 核心 挑戰 創造 未知   ∞   種 手腳 迅速 眼光 精準 早腦 人 還不 速速 搶下 早鳥 優惠 獨家 周邊 商品 購票 還贈   TAAZE   讀冊 生活 折價 卷 早鳥 優惠 只到   10 27 