文 ／ 曾吉弘 CAVE 教育 團隊 本期 App   Inventor 機器人 專欄 藉由 手機 傾斜 程度 控制 機器人 動作 範例 使用 姿態 感測器 Orientation   Sensor X Y 軸向 資訊 共同 決定 樂高 機器人 左右 馬達 電力 控制 畫面 CAVE 小 圖案 移動 範例 2012 年 月號 單點 觸控 概念 相似 訊號 來源 由觸 控點 座標 改為 姿態 感測器 變化 量 數學 運算 用到 sin cos 基礎 三角函數 學生 來說 相當 不錯 練習 機會 姿態 感測器 主要 感應 手機 方位 變化 回傳 三個 軸向 傾斜 角度 分別 X 軸 俯仰 Pitch Y 軸 翻滾 Roll Z 軸 旋轉 Azimuth 或稱 Yaw 玩 機器人 請 NXT 機器人 準備 好 並將 左側 馬達 接在 NXT 輸出 端 B 右側 則是 輸出 端 C 註 請 確認 NXT 主機 藍牙 啟動 接著將 NXT 主機 Android 手機 進行 藍牙 配對 註 完成 之後 機器人 放到 一邊 啟動 藍牙 之後 NXT 主機 螢幕 左上角 看到 藍牙 符號 依序 介紹 程式 功能 STEP1   登入 畫面 首次 進入 程式 畫面 如圖 2a 「 連線 」 按鈕 所有 按鈕 無法 操作 Orientation 感測器 目前 關閉 翻轉 手機 CAVE 小 圖案 動 連線 成功 之後 將其 啟動 點選 「 連線 」 按鈕 後 進入 藍牙 裝置 清單 圖 2b 請 找到 剛剛 配對 完成 NXT 主機 名稱 範例 abc 點選 之後 Android 裝置 NXT 主機 發起 藍牙 連線 順利 連線 成功 看到 pitch roll 資料 不斷更新 搖晃 手機 還能 看到 CAVE 小 圖案 畫布 移動 圖 2c   圖 2a     程式 首次 執行 畫面   圖 2b     點選 連線 按鈕 後 進入 藍牙 裝置 清單   圖 2c     連線 成功 後 出現 相關 資訊 CAVE 小 圖案 會動 STEP2   程式 初始化 點選 連線 清單 之前 ListPicker CONNECT 事件 先 指定 清單 內容 藍牙 配對 裝置 清單 圖 3a 連線 之前 CAVE 小 圖案 無法 移動 先將 姿態 感測器 關 連線 成功 之後 圖 3b 啟動 原本 動 CAVE 小 圖案 無法 按下 「 斷線 」 按鈕 操作   圖 3a     指定 藍牙 配對 裝置 清單 隱藏 觸控板   圖 3b     連線 成功 後 啟動 相關 元件 STEP3   變數 介紹 範例 使用 五個 整數型 變數 介紹 count 用來 切換 感測器 馬達 資訊 是否 顯示 power 取得 姿態 感測器 Magnitude 決定 控制 靈敏度 angle 手機 傾斜 方向 如為 代表 手機 Y 軸 正向 傾斜 pitch 值 增加 LMotor 左 馬達 電力 RMotor 右 馬達 電力   圖     變數 介紹 STEP4   姿態 感測器 資訊 計算 馬達 電力 所有 計算 OrientationSensor1 OrientationChanged 事件 中 完成 姿態 感測器 任一 軸向 資訊 改變 自動 呼叫 事件 執行 內容 以下 依序 說明 移動 CAVE 小 圖案 使用 ImageSprite MoveTo 指令 XY 欄位 指定 ImageSprite X   –   roll ImageSprite Y   –   pitch 當您 搖晃 手 機時 可愛 CAVE 小 圖案 畫面 漂來漂去 相當 有趣 請 注意 CAVE 小 圖案 Y 軸 正向 移動 時 這時候 增加 pitch roll 搞錯 囉 更新 變數 angle     OrientationSensor Angle   –   45 取得 手機 傾斜角 進行 偏量 補償 方便 馬達 電力 計算 power     OrientationSensor Magnitude     200 OrientationSensor Magnitude 一個 介於 之間 小數 代表 手機 傾斜 程度 調整 200 常數 放大 縮小 傾斜 程度 機器人 電力 影響 馬達 電力 範圍 100 100 超過 沒關係 馬達 電力 受 影響 LMotor     cos angle     power 左 馬達 電力 RMotor     sin angle     power 左 馬達 電力 註 堅持 老派 風格 使用 pitch roll 變數 值 搭配 三角函數 計算 之後 相同 機器人 控制 效果 但本 範例 使用 姿態 感測器 angle Magnitude 這兩項 變數 一種 作法 顯示 變數 標籤 pitch roll 資訊 更新 Label Orientation 標籤 並將 左右 馬達 電力 LMotor RMotor 更新 Label Motor 標籤 避免 單一 字串 過長 使用 make   text 指令 多個 字串 組合 一起 這在 程式 語言 中 常見 技巧 轉動 馬達 最後 LMotor RMotor 變數 值 分別 指定 NxtDrive B NxtDrive C MoveforwardIndefinitely 指令 兩個 馬達 手機 傾斜 狀況 運動 STEP5   點選 CAVE 小 圖案 顯示 資訊 本次 程式 一個 附加 功能 點擊 CAVE 小 圖案 顯示 關閉 各樣 資訊 即時 更新 這是 Android 手機 資訊 更新 太過 頻繁 而變 卡卡 視 實際 狀況 決定 是否 顯示 資訊 ImageSprite1 Touched 點擊 事件 中 count 決定 顯示 關閉 訊 即時 更新 圖 6b   圖 6a     方位 感測器 值來 改變 小 圖案 指向   圖 6b     資訊 標籤 關閉 STEP6   斷線 按下 「 斷線 」 按鈕 之後 中止 藍牙 連線 BluetoothClient Disconnect 指令 並使 按鈕 恢復 未 連線 時 狀態 CAVE 小 圖案 再次 回到 畫面 中央 移動 這時候 再次 發起 連線   圖     按下 「 斷線 」 按鈕 時 中斷 藍牙 連線 操作 實際 執行 請 先 確認 NXT 已經 開機 藍牙 啟動 Android 裝置 點選 程式 畫面 中 「 連線 」 按鈕 進到 藍牙 清單 畫面 點選 NXT 主機 名稱 連線 成功 後 搖晃 手機 控制 機器人 圖 8a 8c 操作 方式 相當 直覺 一定 喜歡 小心 手機 掉 地上 操作過程 中 隨時 點選 CAVE 小 圖案 關閉 資訊 顯示   圖 8a     手機 向前 傾斜 機器人 前進 馬達 電力 52 49     圖 8c     兩個 左後方 傾斜 機器人 左後方 轉彎 馬達 電力 37 絕大部分 Android 裝置 姿態 感測器 許多 小遊戲 滾球 賽車 應用 姿態 感測器 偵測 玩家 動作 姿態 感測器 相當 靈敏 也許 需要 針對 範例 中 一些 參數 進行 調整 達到 更好 效果 歡迎 下載 程式 玩玩 掃描 以下 QRCode 唷 有趣 機器人 app 請 Google   Play 搜尋 「 CAVE   教育 團隊 」 找 得到 註 機器人 運動 方向 車頭 指向 程式 設定 相反 左右 馬達 電線 互換 即可 註 想學 開發 App   Inventor 程式 請到 App   Inventor 中文 學習網 http www appinventor tw 一同 學習 註 Android 手機 設定 安裝 非 Google   Play 下載 程式 手機 樂高 NXT 主機 連線 說明 請 參考 連結 註 NXT 連線 後 出現 [ Error   402 ] 錯誤 訊息 請 理會 程式 依然 正確 執行 文章 原文 刊載 ROBOCON 國際 中文版   2013 月號 2017   年泛 知識 節   早腦 人必 搶 早 鳥 優惠 開 跑啦 「   領域   x   150   場 分享 體驗 工作坊   x   200   意見 領袖   x   1000   參與者 」 2017   年 兩岸三地 最大 知識 饗宴   –   泛 ・ 知識 節   早鳥票 開賣 由泛 科 知識 旗下   PanSci   科學 新聞網   娛樂 重擊   Punchline PanX   泛 科技 新聞網 聯合 超強 協力 夥伴 邀 兩天 火拼 知識 大腦 做個 版本升級 11 月   11 12   日到 泛 ． 知識 節 直搗 知識 核心 挑戰 創造 未知   ∞   種 手腳 迅速 眼光 精準 早腦 人 還不 速速 搶下 早鳥 優惠 獨家 周邊 商品 購票 還贈   TAAZE   讀冊 生活 折價 卷 早鳥 優惠 只到   10 27 